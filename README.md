# Chat_bot

# Введение
Часто бывает, что во время использования мессенджеров пользователю требуется найти определенную информацию. Если с персонального компьютера или ноутбука требуется только открыть браузер во втором окне,
то для пользователям со смартфонов это сделать труднее, хоть и началось распространение функции разделения экрана. Как же можно поправить эти неудобства? Можно искать информацию прямо в своем любимом мессенджере!
Данный бот позволяет искать информацию и делиться какими-то статьями, не выходя из телеграмма, который продолжает набирать большую популярность среди пользователей мессенджеров.

# Структура программы
## Структура проекта
Для работы бота используются файлы:
1. requirements.txt - список зависимостей, библиотек
2. main.py - основной файл со всеми алгоритмами
3. Procfile - рабочий файл для деплоя в heroku
4. db/info.db - база данных, где хранится информация о пользователях и их статьях
5. data/users.py - orm для таблицы users в базе данных
6. data/db_session.py - файл для работы с базой данных
7. data/articles.py - orm для таблицы articles в базе данных
8. data/\__all_models.py - файл для использования orm

## Структура main.py
### Class Bot
Данный класс используется для работы бота: в нем происходят все проверки и процессы, необходимые для взаимодействия с пользователям.
В данном классе используются следующие методы:
1. __init__() - инициализация бота
2. create_standart_keyboards() - создание всех основных клавиатур, с которыми будет взаимодействовать пользователь
3. start(update, context) - комманда **start**, запускаемая при первом входе пользователя или перезапуска
4. stop(update, context) - комманда **stop**, которая выключает бота
5. help(update, context) - комманда **help**, которая выводит вспомогательную информацию
6. close_keyboard(update, context) - скрытие клавиатуры при остановки выключении бота
7. text_handler_func(update, context) - проверка всех начальных текстового ввода пользователя и клавиатуры для перехода в работу других функций
8. create_articles_title_handler_func(update, context) - проверка текстового ввода пользователя и клавиатуры, чтобы дать название статье
9. create_articles_text_handler_func(update, context) - проверка текстового ввода пользователя и клавиатуры, чтобы указать текст статьи
10. delete_articles_handler_func(update, context) - проверка текстового ввода пользователя и клавиатуры, чтобы удалить статью
11. update_articles_text_handler_func(update, context) - проверка текстового ввода пользователя и клавиатуры, чтобы изменить текст статьи
12. articles_handler_func(update, context) - проверка текстового ввода пользователя и клавиатуры, чтобы выбрать, чьи статьи смотреть
13. output_articles_handler_func(update, context) - проверка текстового ввода пользователя и клавиатуры, чтобы выбрать, какую статью вывести или изменить
14. wiki_handler_func(update, context) - проверка текстового ввода пользователя и клавиатуры, чтобы выполнить запрос в википедию или получить изображения и url статьи
15. map_handler_func(update, context) - проверка текстового ввода пользователя и клавиатуры, чтобы выполнить запрос в яндекс.карты или изменить тип карты (гибрид и спутник)
16. transliteration_handler_func(update, context) - проверка текстового ввода пользователя и клавиатуры, чтобы исправить раскладку сообщения

### Class Wiki
Данный класс используется для создания запросов в википедию и вывода информацию с энциклопедии.
В данном классе используются следуюие методы:
1. __init__(request) - инициализация запроса
2. get_images(update, context) - получение большего количества изображений из википедии
3. get_url(update, context) - получение url оригинальной статьи
4. get_content(update, context) - получение основного контента из википедии

### Class YandexMap
Данный класс используется для создания запросов в яндекс.карты и вывода карт с ресурса.
В данном классе используются следующие методы:
1. __init__(update, request) - инициализация запроса
2. set_l(type, update, context) - изменение типа карты (гибрид и спутник)
3. send_map(update, context) - вывод пользователю фрагмента карты
4. get_ll_spn(self, toponym) - получение координат и масштаба места


### Class Translit
Данный класс используется для изменения расскладки сообщения.
В данном классе используются следующие методы:
1. __init__() - инициализация раскладок
2. transliteration(message) - замена символов на другую раскладку


### DataBase:
Данный класс используется для работы с базой данных:
В данном классе используются следующие методы:
1. __init__(address) - инициализация базы данных
2. create_keyboard(context, update) - создание списка статей для клавиатуры
3. output_arciles(title) - получение статьи для последующего вывода
4. add_user(update, context) - добавление пользователя в базу данных
5. add_article(chat_id, update, context) - добавление статьи в базу данных
6. del_article(chat_id, title) - удаление статьи из базы данных
7. update_article(title, text) - изменение текста статьи в базе данных
8. checking_the_number_of_articles(chat_id) - проверка количества статей у пользователя (не больше 20-и)
9. check_articles_titles(title) - проверка на повторение названия статьи
10. search_chat(chat_id) - проверка на нахождение пользователя в базу данных
11. get_stat(chat_id, update, context) - вывод статистики пользователя
12. update_stat(chat_id, type) - обновление статистики пользователя
